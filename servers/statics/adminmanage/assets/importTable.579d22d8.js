import{r as c,G as q,d as i,o as z,j as I,w as o,e as j,f as e,x as s,i as y,B as D,I as L,m as f,n as P}from"./index.23926b0b.js";import{l as Q,i as E}from"./gen.383304f8.js";const F=f("\u641C\u7D22"),G=f("\u91CD\u7F6E"),A={class:"dialog-footer"},H=f("\u786E \u5B9A"),J=f("\u53D6 \u6D88"),X={emits:["ok"],setup(M,{expose:C,emit:N}){const _=c(0),u=c(!1),v=c([]),w=c([]),{proxy:r}=P(),l=q({pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0});function V(){b(),u.value=!0}function k(a){r.$refs.table.toggleRowSelection(a)}function S(a){v.value=a.map(t=>t.tableName)}function b(){Q(l).then(a=>{w.value=a.rows,_.value=a.total})}function p(){l.pageNum=1,b()}function x(){r.resetForm("queryRef"),p()}function T(){const a=v.value.join(",");if(a==""){r.$modal.msgError("\u8BF7\u9009\u62E9\u8981\u5BFC\u5165\u7684\u8868");return}E({tables:a}).then(t=>{r.$modal.msgSuccess(t.msg),t.code===200&&(u.value=!1,N("ok"))})}return C({show:V}),(a,t)=>{const h=i("el-input"),g=i("el-form-item"),d=i("el-button"),R=i("el-form"),m=i("el-table-column"),K=i("el-table"),U=i("pagination"),B=i("el-row"),$=i("el-dialog");return z(),I($,{title:"\u5BFC\u5165\u8868",modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=n=>u.value=n),width:"800px",top:"5vh","append-to-body":""},{footer:o(()=>[j("div",A,[e(d,{type:"primary",onClick:T},{default:o(()=>[H]),_:1}),e(d,{onClick:t[4]||(t[4]=n=>u.value=!1)},{default:o(()=>[J]),_:1})])]),default:o(()=>[e(R,{model:s(l),ref:"queryRef",inline:!0},{default:o(()=>[e(g,{label:"\u8868\u540D\u79F0",prop:"tableName"},{default:o(()=>[e(h,{modelValue:s(l).tableName,"onUpdate:modelValue":t[0]||(t[0]=n=>s(l).tableName=n),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:"",onKeyup:y(p,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{label:"\u8868\u63CF\u8FF0",prop:"tableComment"},{default:o(()=>[e(h,{modelValue:s(l).tableComment,"onUpdate:modelValue":t[1]||(t[1]=n=>s(l).tableComment=n),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:"",onKeyup:y(p,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:o(()=>[e(d,{type:"primary",icon:"Search",onClick:p},{default:o(()=>[F]),_:1}),e(d,{icon:"Refresh",onClick:x},{default:o(()=>[G]),_:1})]),_:1})]),_:1},8,["model"]),e(B,null,{default:o(()=>[e(K,{onRowClick:k,ref:"table",data:w.value,onSelectionChange:S,height:"260px"},{default:o(()=>[e(m,{type:"selection",width:"55"}),e(m,{prop:"tableName",label:"\u8868\u540D\u79F0","show-overflow-tooltip":!0}),e(m,{prop:"tableComment",label:"\u8868\u63CF\u8FF0","show-overflow-tooltip":!0}),e(m,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"}),e(m,{prop:"updateTime",label:"\u66F4\u65B0\u65F6\u95F4"})]),_:1},8,["data"]),D(e(U,{total:_.value,page:s(l).pageNum,"onUpdate:page":t[2]||(t[2]=n=>s(l).pageNum=n),limit:s(l).pageSize,"onUpdate:limit":t[3]||(t[3]=n=>s(l).pageSize=n),onPagination:b},null,8,["total","page","limit"]),[[L,_.value>0]])]),_:1})]),_:1},8,["modelValue"])}}};export{X as default};
