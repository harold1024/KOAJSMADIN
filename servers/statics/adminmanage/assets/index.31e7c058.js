import{D as we,G as Ce,r as v,P as Ne,d as u,A as $,o,c as P,e as c,B as N,I as Ie,f as e,w as d,x as t,i as Ue,F as H,C as Q,j as r,X as Y,v as K,k as h,Y as xe,m as n,n as Te,O as Fe}from"./index.23926b0b.js";import{I as Se}from"./index.46c9668c.js";import{f as ee,a as Pe,r as Re,u as Me,s as Oe}from"./menu.b810a6ce.js";const De={id:"defaultId1"},Ae={id:"idbGPIvn",class:"app-container"},qe=n(" \u641C\u7D22 "),Be=n(" \u91CD\u7F6E "),Ge=n(" \u65B0\u589E "),He=n(" \u5C55\u5F00/\u6298\u53E0 "),Qe={id:"idLruO9a"},Ke=n(" \u4FEE\u6539 "),Le=n(" \u65B0\u589E "),je=n(" \u5220\u9664 "),ze=n(" \u76EE\u5F55 "),Ee=n(" \u83DC\u5355 "),Ze=n(" \u6309\u94AE "),Xe={id:"idbvK7eX"},Je=n(" \u662F\u5426\u5916\u94FE "),We=n(" \u662F "),$e=n(" \u5426 "),Ye={id:"idVoOv3M"},ed=n(" \u8DEF\u7531\u5730\u5740 "),dd={id:"idPghmpH"},ld=n(" \u7EC4\u4EF6\u8DEF\u5F84 "),td={id:"idhRdhIU"},id=n(" \u6743\u9650\u5B57\u7B26 "),ad={id:"idZvA1KU"},nd=n(" \u8DEF\u7531\u53C2\u6570 "),od={id:"idSG5UdN"},ud=n(" \u662F\u5426\u7F13\u5B58 "),sd=n(" \u7F13\u5B58 "),rd=n(" \u4E0D\u7F13\u5B58 "),md={id:"idI5DxUJ"},pd=n(" \u663E\u793A\u72B6\u6001 "),_d={id:"idJiEI64"},cd=n(" \u83DC\u5355\u72B6\u6001 "),fd={id:"id9SVrcb",class:"dialog-footer"},vd=n(" \u786E \u5B9A "),hd=n(" \u53D6 \u6D88 "),bd=we({name:"Menu"}),wd=Object.assign(bd,{setup(Vd){const{proxy:f}=Te(),{sys_show_hide:de,sys_normal_disable:R}=f.useDict("sys_show_hide","sys_normal_disable");async function L(){E.value=[];let s=await ee({});if(s){const i={menuId:0,menuName:"\u4E3B\u7C7B\u76EE",children:[]};i.children=f.handleTree(s.data,"menuId"),E.value.push(i)}}function M(){I()}function O(){a.value={menuId:void 0,parentId:0,menuName:void 0,icon:void 0,menuType:"M",orderNum:void 0,isFrame:"1",isCache:"0",visible:"0",status:"0"},f.resetForm("menuRef")}function le(){f.resetForm("queryRef"),M()}function j(s){O(),L(),s!=null&&s.menuId?a.value.parentId=s.menuId:a.value.parentId=0,w.value=!0,G.value="\u6DFB\u52A0\u83DC\u5355"}function te(){A.value=!1,B.value=!B.value,Fe(()=>{A.value=!0})}async function I(){F.value=!0;let s=await ee(U.value);s&&(q.value=f.handleTree(s.data,"menuId")),F.value=!1}async function ie(s){O(),await L();let i=await Pe({_id:s._id});i&&(a.value=i.data,w.value=!0,G.value="\u4FEE\u6539\u83DC\u5355")}function ae(s){f.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u79F0\u4E3A"'+s.menuName+'"\u7684\u6570\u636E\u9879?').then(async function(){let i=await Re({_id:s._id});if(i)return i}).then(()=>{I(),f.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function z(){Z.value.reset(),x.value=!0}function ne(){x.value=!1}function oe(s){a.value.icon=s,x.value=!1}function ue(){f.$refs.menuRef.validate(async s=>{if(s)if(a.value.menuId!=null)await Me(a.value)&&(f.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),w.value=!1,I());else{await Oe(a.value)&&(f.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),w.value=!1,I());return}})}function se(){w.value=!1,O()}var re=Ce({form:{},queryParams:{menuName:void 0,status:void 0},rules:{menuName:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNum:[{required:!0,message:"\u83DC\u5355\u987A\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u8DEF\u7531\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}});const D=v(!0),A=v(!0),F=v(!0);var q=v([]);const B=v(!1),G=v(""),w=v(!1),E=v([]),x=v(!1),Z=v(null),{queryParams:U,form:a,rules:me}=Ne(re);return I(),(s,i)=>{const C=u("el-input"),m=u("el-form-item"),pe=u("el-option"),_e=u("el-select"),b=u("el-button"),X=u("el-form"),_=u("el-col"),ce=u("right-toolbar"),J=u("el-row"),g=u("el-table-column"),fe=u("dict-tag"),ve=u("el-table"),he=u("el-tree-select"),V=u("el-radio"),T=u("el-radio-group"),be=u("search"),y=u("el-icon"),Ve=u("el-popover"),ye=u("el-input-number"),p=u("question-filled"),k=u("el-tooltip"),ge=u("el-dialog"),S=$("hasPermi"),ke=$("loading");return o(),P("div",De,[c("div",Ae,[N(e(X,{id:"idgjzCc6",model:t(U),ref:"queryRef",inline:!0},{default:d(()=>[e(m,{id:"idShCZ1M",label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:d(()=>[e(C,{id:"ids1eMXp",modelValue:t(U).menuName,"onUpdate:modelValue":i[0]||(i[0]=l=>t(U).menuName=l),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",clearable:"",onKeyup:Ue(M,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{id:"id8uDibh",label:"\u72B6\u6001",prop:"status"},{default:d(()=>[e(_e,{id:"idfvsV4o",modelValue:t(U).status,"onUpdate:modelValue":i[1]||(i[1]=l=>t(U).status=l),placeholder:"\u83DC\u5355\u72B6\u6001",clearable:""},{default:d(()=>[(o(!0),P(H,null,Q(t(R),l=>(o(),r(pe,{id:"idXgVbo6",key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{id:"idGAEwwd"},{default:d(()=>[e(b,{id:"idBQWmE5",onClick:M,type:"primary",icon:"Search"},{default:d(()=>[qe]),_:1}),e(b,{id:"idMWVVB2",onClick:le,icon:"Refresh"},{default:d(()=>[Be]),_:1})]),_:1})]),_:1},8,["model"]),[[Ie,D.value]]),e(J,{id:"idMBUV8P",class:"mb8",gutter:10},{default:d(()=>[e(_,{id:"idRrNtbZ",span:1.5},{default:d(()=>[N((o(),r(b,{id:"idMThaXh",onClick:j,type:"primary",plain:"",icon:"Plus"},{default:d(()=>[Ge]),_:1})),[[S,["system:menu:add"]]])]),_:1},8,["span"]),e(_,{id:"idAfrgpF",span:1.5},{default:d(()=>[e(b,{id:"id4bLn6v",onClick:te,type:"info",plain:"",icon:"Sort"},{default:d(()=>[He]),_:1})]),_:1},8,["span"]),e(ce,{id:"idUaVpkN",showsearch:D.value,"onUpdate:showsearch":i[2]||(i[2]=l=>D.value=l),onQueryTable:I},null,8,["showsearch"])]),_:1}),A.value?N((o(),r(ve,{key:0,id:"idLvhveC",data:t(q),"row-key":"menuId","default-expand-all":B.value,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:d(()=>[e(g,{id:"id2bJUSq",prop:"menuName",label:"\u83DC\u5355\u540D\u79F0","show-overflow-tooltip":!0,width:"160"}),e(g,{id:"idGUvGKJ",prop:"icon",label:"\u56FE\u6807",align:"center",width:"100"},{default:d(l=>[e(t(Y),{id:"idqCOHUV","icon-class":l.row.icon},null,8,["icon-class"])]),_:1}),e(g,{id:"idVwEfCf",prop:"orderNum",label:"\u6392\u5E8F",width:"60"}),e(g,{id:"idFVXKmP",prop:"perms",label:"\u6743\u9650\u6807\u8BC6","show-overflow-tooltip":!0}),e(g,{id:"idbt29Zg",prop:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84","show-overflow-tooltip":!0}),e(g,{id:"idisdDmv",prop:"status",label:"\u72B6\u6001",width:"80"},{default:d(l=>[e(fe,{id:"idoV8PKa",options:t(R),value:l.row.status},null,8,["options","value"])]),_:1}),e(g,{id:"idHCsvjn",label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"200px"},{default:d(l=>[c("span",Qe,K(s.parseTime(l.row.createTime)),1)]),_:1}),e(g,{id:"id9OFDvO",label:"\u64CD\u4F5C",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:d(l=>[N((o(),r(b,{id:"idzpiLCd",onClick:W=>ie(l.row),type:"text",icon:"Edit"},{default:d(()=>[Ke]),_:2},1032,["onClick"])),[[S,["system:menu:edit"]]]),N((o(),r(b,{id:"iduWGDHk",onClick:W=>j(l.row),type:"text",icon:"Plus"},{default:d(()=>[Le]),_:2},1032,["onClick"])),[[S,["system:menu:add"]]]),N((o(),r(b,{id:"idMglJhQ",onClick:W=>ae(l.row),type:"text",icon:"Delete"},{default:d(()=>[je]),_:2},1032,["onClick"])),[[S,["system:menu:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[ke,F.value]]):h("",!0),e(ge,{id:"idq2WDQV",modelValue:w.value,"onUpdate:modelValue":i[17]||(i[17]=l=>w.value=l),title:G.value,width:"680px","append-to-body":""},{footer:d(()=>[c("div",fd,[e(b,{id:"idZkOUhr",onClick:ue,type:"primary"},{default:d(()=>[vd]),_:1}),e(b,{id:"idxXbvFd",onClick:se},{default:d(()=>[hd]),_:1})])]),default:d(()=>[e(X,{id:"idmijbHQ",ref:"menuRef",model:t(a),rules:t(me),"label-width":"100px"},{default:d(()=>[e(J,{id:"idJIK4dG"},{default:d(()=>[e(_,{id:"idusjKTN",span:24},{default:d(()=>[e(m,{id:"idgNlpvT",label:"\u4E0A\u7EA7\u83DC\u5355"},{default:d(()=>[e(he,{id:"idkjCeX1",modelValue:t(a).parentId,"onUpdate:modelValue":i[3]||(i[3]=l=>t(a).parentId=l),data:t(q),props:{value:"menuId",label:"menuName",children:"children"},"value-key":"menuId",placeholder:"\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1})]),_:1}),e(_,{id:"iduVbWUF",span:24},{default:d(()=>[e(m,{id:"idCZqTmn",label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType"},{default:d(()=>[e(T,{id:"idlK8IF6",modelValue:t(a).menuType,"onUpdate:modelValue":i[4]||(i[4]=l=>t(a).menuType=l)},{default:d(()=>[e(V,{id:"idZNZh6o",label:"M"},{default:d(()=>[ze]),_:1}),e(V,{id:"idveHD6B",label:"C"},{default:d(()=>[Ee]),_:1}),e(V,{id:"idr9ehmc",label:"F"},{default:d(()=>[Ze]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(a).menuType!="F"?(o(),r(_,{key:0,id:"idehkNAg",span:24},{default:d(()=>[e(m,{id:"id2vQ2ng",label:"\u83DC\u5355",prop:"icon"},{default:d(()=>[e(Ve,{id:"idrxo5gz",placement:"bottom-start",width:540,visible:x.value,"onUpdate:visible":i[6]||(i[6]=l=>x.value=l),trigger:"click",onShow:z},{reference:d(()=>[N((o(),r(C,{id:"idRU7L8d",modelValue:t(a).icon,"onUpdate:modelValue":i[5]||(i[5]=l=>t(a).icon=l),onClick:z,placeholder:"\u70B9\u51FB\u9009\u62E9\u56FE\u6807",readonly:""},{prefix:d(()=>[t(a).icon?(o(),r(t(Y),{key:0,id:"idovzl7p",class:"el-input__icon","icon-class":t(a).icon},null,8,["icon-class"])):(o(),r(y,{key:1,id:"id45G5vz",class:"u856a3"},{default:d(()=>[e(be,{id:"idmCIFv9"})]),_:1}))]),_:1},8,["modelValue"])),[[t(xe),ne]])]),default:d(()=>[e(t(Se),{id:"idPahGRP",class:"u9751e",ref_key:"iconSelectRef",ref:Z,onSelected:oe},null,512)]),_:1},8,["visible"])]),_:1})]),_:1})):h("",!0),e(_,{id:"idgGLwV7",span:12},{default:d(()=>[e(m,{id:"idE2poCG",label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:d(()=>[e(C,{id:"id1vnaDV",modelValue:t(a).menuName,"onUpdate:modelValue":i[7]||(i[7]=l=>t(a).menuName=l),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{id:"id6TWmOg",span:12},{default:d(()=>[e(m,{id:"idKhQand",label:"\u663E\u793A\u6392\u5E8F",prop:"orderNum"},{default:d(()=>[e(ye,{id:"idNPoNpw",modelValue:t(a).orderNum,"onUpdate:modelValue":i[8]||(i[8]=l=>t(a).orderNum=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),t(a).menuType!="F"?(o(),r(_,{key:1,id:"idsHfggm",span:12},{default:d(()=>[e(m,{id:"idSv5kQH"},{label:d(()=>[c("span",Xe,[e(k,{id:"idifjteL",content:"\u9009\u62E9\u662F\u5916\u94FE\u5219\u8DEF\u7531\u5730\u5740\u9700\u8981\u4EE5`http(s)://`\u5F00\u5934",placement:"top"},{default:d(()=>[e(y,{id:"idPbCBQd"},{default:d(()=>[e(p,{id:"idS2kHop"})]),_:1}),e(p,{id:"idMzrR2e"})]),_:1}),Je])]),default:d(()=>[e(T,{id:"idVZLvUf",modelValue:t(a).isFrame,"onUpdate:modelValue":i[9]||(i[9]=l=>t(a).isFrame=l)},{default:d(()=>[e(V,{id:"id666ljv",label:"0"},{default:d(()=>[We]),_:1}),e(V,{id:"id7gmm6V",label:"1"},{default:d(()=>[$e]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType!="F"?(o(),r(_,{key:2,id:"idsaNuc7",span:12},{default:d(()=>[e(m,{id:"idNxOPwF",prop:"path"},{label:d(()=>[c("span",Ye,[e(k,{id:"id38x1rf",content:"\u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934",placement:"top"},{default:d(()=>[e(y,{id:"idae35fx"},{default:d(()=>[e(p,{id:"id2qj7Pb"})]),_:1}),e(p,{id:"idB3kkja"})]),_:1}),ed])]),default:d(()=>[e(C,{id:"idBMpRRr",modelValue:t(a).path,"onUpdate:modelValue":i[10]||(i[10]=l=>t(a).path=l),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType=="C"?(o(),r(_,{key:3,id:"idvhfkA7",span:12},{default:d(()=>[e(m,{id:"idQw5coW",prop:"component"},{label:d(()=>[c("span",dd,[e(k,{id:"idVLNwOT",content:"\u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`system/user/index`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B",placement:"top"},{default:d(()=>[e(y,{id:"idn7vqSf"},{default:d(()=>[e(p,{id:"id81VQkk"})]),_:1}),e(p,{id:"idmhghce"})]),_:1}),ld])]),default:d(()=>[e(C,{id:"id3SFpa5",modelValue:t(a).component,"onUpdate:modelValue":i[11]||(i[11]=l=>t(a).component=l),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType!="M"?(o(),r(_,{key:4,id:"idikgcNa",span:12},{default:d(()=>[e(m,{id:"idBDX9B7"},{label:d(()=>[c("span",td,[e(k,{id:"idXPgTbh",content:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasPermi('system:user:list')`)",placement:"top"},{default:d(()=>[e(y,{id:"idD1A7cx"},{default:d(()=>[e(p,{id:"idOHexLg"})]),_:1}),e(p,{id:"idmuRIu3"})]),_:1}),id])]),default:d(()=>[e(C,{id:"id9lhRnJ",modelValue:t(a).perms,"onUpdate:modelValue":i[12]||(i[12]=l=>t(a).perms=l),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u6807\u8BC6",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType=="C"?(o(),r(_,{key:5,id:"idOugKOA",span:12},{default:d(()=>[e(m,{id:"idzAHhpc"},{label:d(()=>[c("span",ad,[e(k,{id:"idG83nsb",content:"\u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{'id': 1, 'name': 'ry'}`",placement:"top"},{default:d(()=>[e(y,{id:"idIO4nlD"},{default:d(()=>[e(p,{id:"idVlgGQl"})]),_:1}),e(p,{id:"id69VKVF"})]),_:1}),nd])]),default:d(()=>[e(C,{id:"id2Hc9ro",modelValue:t(a).query,"onUpdate:modelValue":i[13]||(i[13]=l=>t(a).query=l),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType=="C"?(o(),r(_,{key:6,id:"idst1FuS",span:12},{default:d(()=>[e(m,{id:"idAJtFO2"},{label:d(()=>[c("span",od,[e(k,{id:"idz6Nbbe",content:"\u9009\u62E9\u662F\u5219\u4F1A\u88AB`keep-alive`\u7F13\u5B58\uFF0C\u9700\u8981\u5339\u914D\u7EC4\u4EF6\u7684`name`\u548C\u5730\u5740\u4FDD\u6301\u4E00\u81F4",placement:"top"},{default:d(()=>[e(y,{id:"idAdsjdF"},{default:d(()=>[e(p,{id:"idpSTkUI"})]),_:1}),e(p,{id:"idZJNPAz"})]),_:1}),ud])]),default:d(()=>[e(T,{id:"id5olxHn",modelValue:t(a).isCache,"onUpdate:modelValue":i[14]||(i[14]=l=>t(a).isCache=l)},{default:d(()=>[e(V,{id:"id4rnRnX",label:"0"},{default:d(()=>[sd]),_:1}),e(V,{id:"idovgGgM",label:"1"},{default:d(()=>[rd]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType!="F"?(o(),r(_,{key:7,id:"idsf3uVU",span:12},{default:d(()=>[e(m,{id:"idRrSIuB"},{label:d(()=>[c("span",md,[e(k,{id:"id1NVkxu",content:"\u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE",placement:"top"},{default:d(()=>[e(y,{id:"idOVgAFr"},{default:d(()=>[e(p,{id:"idugsfQF"})]),_:1}),e(p,{id:"idz6w5OM"})]),_:1}),pd])]),default:d(()=>[e(T,{id:"idgFeVJV",modelValue:t(a).visible,"onUpdate:modelValue":i[15]||(i[15]=l=>t(a).visible=l)},{default:d(()=>[(o(!0),P(H,null,Q(t(de),l=>(o(),r(V,{id:"id5dL1HV",key:l.value,label:l.value},{default:d(()=>[n(K(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):h("",!0),t(a).menuType!="F"?(o(),r(_,{key:8,id:"idj8H2Bm",span:12},{default:d(()=>[e(m,{id:"idf7VZzl"},{label:d(()=>[c("span",_d,[e(k,{id:"idRRMupu",content:"\u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE",placement:"top"},{default:d(()=>[e(y,{id:"idEPODkU"},{default:d(()=>[e(p,{id:"idEBT22v"})]),_:1}),e(p,{id:"idvCsM9I"})]),_:1}),cd])]),default:d(()=>[e(T,{id:"idSS3xZR",modelValue:t(a).status,"onUpdate:modelValue":i[16]||(i[16]=l=>t(a).status=l)},{default:d(()=>[(o(!0),P(H,null,Q(t(R),l=>(o(),r(V,{id:"idNA94lV",key:l.value,label:l.value},{default:d(()=>[n(K(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])])}}});export{wd as default};
