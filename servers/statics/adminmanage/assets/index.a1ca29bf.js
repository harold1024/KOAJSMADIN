var me=Object.defineProperty;var j=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var z=(f,i,u)=>i in f?me(f,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):f[i]=u,A=(f,i)=>{for(var u in i||(i={}))_e.call(i,u)&&z(f,u,i[u]);if(j)for(var u of j(i))ce.call(i,u)&&z(f,u,i[u]);return f};import{D as fe,G as ve,r as v,P as he,d as n,A as G,o as r,c as S,e as p,B as y,I as ge,f as e,w as d,x as a,i as be,F as T,C as M,j as h,v as O,k as q,m as B,n as Ve,O as ye}from"./index.23926b0b.js";import{f as ke,a as xe,r as we,u as Ie,s as Ne}from"./dept.5f65af1d.js";const Ce={id:"defaultId1"},De={id:"idoMajF5",class:"app-container"},Ue=B(" \u641C\u7D22 "),Pe=B(" \u91CD\u7F6E "),Re=p("span",{id:"idCu9dzI"},"\u65B0\u589E ",-1),Ee=p("span",{id:"idLeVHaH"},"\u5C55\u5F00/\u6298\u53E0 ",-1),Se={id:"idlLxoKt"},qe={id:"idtE8gbg"},Be=p("span",{id:"idJEDXqI"},"\u4FEE\u6539 ",-1),Fe=p("span",{id:"idLBMh4Q"},"\u65B0\u589E ",-1),He=p("span",{id:"idmXaBiu"},"\u5220\u9664 ",-1),Ke={id:"idI9luFx",class:"dialog-footer"},Le=p("span",{id:"idrkMr4c"},"\u786E \u5B9A ",-1),je=p("span",{id:"idL7xQSc"},"\u53D6 \u6D88 ",-1),ze=fe({name:"Dept"}),Oe=Object.assign(ze,{setup(f){const{proxy:i}=Ve(),{sys_normal_disable:u}=i.useDict("sys_normal_disable");function I(){b()}function N(){o.value={deptId:void 0,parentId:void 0,deptName:void 0,orderNum:0,leader:void 0,phone:void 0,email:void 0,status:"0"},i.resetForm("deptRef")}function Q(){i.resetForm("queryRef"),I()}function F(s){N(),console.log("\u70B9\u51FB\u4E86\u65B0\u589E"),s!=null&&(console.log(s),o.value.parentId=s.deptId),g.value=!0,E.value="\u6DFB\u52A0\u90E8\u95E8"}function $(){D.value=!1,R.value=!R.value,ye(()=>{D.value=!0})}function b(){U.value=!0;let s=A({},V.value);s.start=0,s.limit=1e3,ke(s).then(t=>{P.value=i.handleTree(t.data.list,"deptId"),U.value=!1})}function W(s){N(),xe({_id:s._id}).then(t=>{o.value=t.data,g.value=!0,E.value="\u4FEE\u6539\u90E8\u95E8"})}function X(s){i.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u79F0\u4E3A"'+s.deptName+'"\u7684\u6570\u636E\u9879?').then(function(){return we({_id:s._id})}).then(()=>{b(),i.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function J(){i.$refs.deptRef.validate(s=>{s&&(o.value.deptId!=null?Ie(o.value).then(t=>{i.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),g.value=!1,b()}):Ne(o.value).then(t=>{i.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),g.value=!1,b()}))})}function Z(){g.value=!1,N()}var Y=ve({form:{},queryParams:{deptName:void 0,status:void 0},rules:{parentId:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deptName:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNum:[{required:!0,message:"\u663E\u793A\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}});const C=v(!0),D=v(!0),U=v(!0),P=v([]),R=v(!0),E=v(""),g=v(!1);v([]);const{queryParams:V,form:o,rules:ee}=he(Y);return b(),(s,t)=>{const k=n("el-input"),m=n("el-form-item"),de=n("el-option"),le=n("el-select"),_=n("el-button"),H=n("el-form"),c=n("el-col"),te=n("right-toolbar"),K=n("el-row"),x=n("el-table-column"),ae=n("dict-tag"),oe=n("el-table"),ie=n("el-tree-select"),ne=n("el-input-number"),se=n("el-radio"),ue=n("el-radio-group"),re=n("el-dialog"),w=G("hasPermi"),pe=G("loading");return r(),S("div",Ce,[p("div",De,[y(e(H,{id:"idCHQpkn",model:a(V),ref:"queryRef",inline:!0},{default:d(()=>[e(m,{id:"idgLtaec",label:"\u90E8\u95E8\u540D\u79F0",prop:"deptName"},{default:d(()=>[e(k,{id:"id5kVm6t",modelValue:a(V).deptName,"onUpdate:modelValue":t[0]||(t[0]=l=>a(V).deptName=l),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:"",onKeyup:be(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{id:"idthgjUf",label:"\u72B6\u6001",prop:"status"},{default:d(()=>[e(le,{id:"idGU8GNQ",modelValue:a(V).status,"onUpdate:modelValue":t[1]||(t[1]=l=>a(V).status=l),placeholder:"\u90E8\u95E8\u72B6\u6001",clearable:""},{default:d(()=>[(r(!0),S(T,null,M(a(u),l=>(r(),h(de,{id:"idFeMkcG",key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{id:"idvGdqE3"},{default:d(()=>[e(_,{id:"idc7UlMK",onClick:I,type:"primary",icon:"Search"},{default:d(()=>[Ue]),_:1}),e(_,{id:"idWpPpBU",onClick:Q,icon:"Refresh"},{default:d(()=>[Pe]),_:1})]),_:1})]),_:1},8,["model"]),[[ge,C.value]]),e(K,{id:"id6rv8g3",class:"mb8",gutter:10},{default:d(()=>[e(c,{id:"idsajRje",span:1.5},{default:d(()=>[y((r(),h(_,{id:"idWCc6Va",onClick:F,type:"primary",plain:"",icon:"Plus"},{default:d(()=>[Re]),_:1})),[[w,["system:dept:add"]]])]),_:1},8,["span"]),e(c,{id:"idRsA6b3",span:1.5},{default:d(()=>[e(_,{id:"id9a3hDR",onClick:$,type:"info",plain:"",icon:"Sort"},{default:d(()=>[Ee]),_:1})]),_:1},8,["span"]),e(te,{id:"idpEdKBf",showsearch:C.value,"onUpdate:showsearch":t[2]||(t[2]=l=>C.value=l),onQueryTable:b},null,8,["showsearch"])]),_:1}),D.value?y((r(),h(oe,{key:0,id:"idTsBvAb",data:P.value,"row-key":"deptId","default-expand-all":R.value,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:d(()=>[e(x,{id:"idEJnN6c",prop:"deptName",label:"\u90E8\u95E8\u540D\u79F0",width:"260"}),e(x,{id:"idS1kcAm",prop:"orderNum",label:"\u6392\u5E8F",width:"200"}),e(x,{id:"idXDqKnH",prop:"status",label:"\u72B6\u6001",width:"100"},{default:d(l=>[e(ae,{id:"idjEGiH6",options:a(u),value:l.row.status},null,8,["options","value"])]),_:1}),e(x,{id:"idjDzvVI",label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:""},{default:d(l=>[p("span",Se,[p("span",qe,O(s.parseTime(l.row.createTime)),1)])]),_:1}),e(x,{id:"idtHfVOt",label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width",width:"200"},{default:d(l=>[y((r(),h(_,{id:"idfUb1OI",onClick:L=>W(l.row),type:"text",icon:"Edit"},{default:d(()=>[Be]),_:2},1032,["onClick"])),[[w,["system:dept:edit"]]]),y((r(),h(_,{id:"idugVWAG",onClick:L=>F(l.row),type:"text",icon:"Plus"},{default:d(()=>[Fe]),_:2},1032,["onClick"])),[[w,["system:dept:add"]]]),l.row.parentId!=0?y((r(),h(_,{key:0,id:"idKzvNot",onClick:L=>X(l.row),type:"text",icon:"Delete"},{default:d(()=>[He]),_:2},1032,["onClick"])),[[w,["system:dept:remove"]]]):q("",!0)]),_:1})]),_:1},8,["data","default-expand-all"])),[[pe,U.value]]):q("",!0),e(re,{id:"idkV69Hx",modelValue:g.value,"onUpdate:modelValue":t[10]||(t[10]=l=>g.value=l),title:E.value,width:"600px","append-to-body":""},{footer:d(()=>[p("div",Ke,[e(_,{id:"idz3beI3",onClick:J,type:"primary"},{default:d(()=>[Le]),_:1}),e(_,{id:"idRzRvEP",onClick:Z},{default:d(()=>[je]),_:1})])]),default:d(()=>[e(H,{id:"idPoDU3D",ref:"deptRef",model:a(o),rules:a(ee),"label-width":"80px"},{default:d(()=>[e(K,{id:"idtKHZqG"},{default:d(()=>[a(o).parentId!==0?(r(),h(c,{key:0,id:"idMu7oDv",span:24},{default:d(()=>[e(m,{id:"id9WXfM2",label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"parentId"},{default:d(()=>[e(ie,{id:"idQwDJOx",modelValue:a(o).parentId,"onUpdate:modelValue":t[3]||(t[3]=l=>a(o).parentId=l),data:P.value,props:{value:"deptId",label:"deptName",children:"children"},"value-key":"deptId",placeholder:"\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8","check-strictly":""},null,8,["modelValue","data"])]),_:1})]),_:1})):q("",!0),e(c,{id:"id6VBfoL",span:12},{default:d(()=>[e(m,{id:"idFa6WeU",label:"\u90E8\u95E8\u540D\u79F0",prop:"deptName"},{default:d(()=>[e(k,{id:"idZT8UXf",modelValue:a(o).deptName,"onUpdate:modelValue":t[4]||(t[4]=l=>a(o).deptName=l),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{id:"idIti9Ix",span:12},{default:d(()=>[e(m,{id:"idOD2vxH",label:"\u663E\u793A\u6392\u5E8F",prop:"orderNum"},{default:d(()=>[e(ne,{id:"idLzOVFo",modelValue:a(o).orderNum,"onUpdate:modelValue":t[5]||(t[5]=l=>a(o).orderNum=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{id:"idMQwSbP",span:12},{default:d(()=>[e(m,{id:"idpdOdbR",label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:d(()=>[e(k,{id:"idaK1rFm",modelValue:a(o).leader,"onUpdate:modelValue":t[6]||(t[6]=l=>a(o).leader=l),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{id:"idLhwEK2",span:12},{default:d(()=>[e(m,{id:"idl8JWu8",label:"\u8054\u7CFB\u7535\u8BDD",prop:"phone"},{default:d(()=>[e(k,{id:"idg21Man",modelValue:a(o).phone,"onUpdate:modelValue":t[7]||(t[7]=l=>a(o).phone=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",maxlength:"11"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{id:"idsjejhA",span:12},{default:d(()=>[e(m,{id:"idZUamPP",label:"\u90AE\u7BB1",prop:"email"},{default:d(()=>[e(k,{id:"idzAz5Sz",modelValue:a(o).email,"onUpdate:modelValue":t[8]||(t[8]=l=>a(o).email=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{id:"idoH8zg9",span:12},{default:d(()=>[e(m,{id:"idVgtGGH",label:"\u90E8\u95E8\u72B6\u6001"},{default:d(()=>[e(ue,{id:"ideiVeei",modelValue:a(o).status,"onUpdate:modelValue":t[9]||(t[9]=l=>a(o).status=l)},{default:d(()=>[(r(!0),S(T,null,M(a(u),l=>(r(),h(se,{id:"idVawi7a",key:l.value,label:l.value},{default:d(()=>[B(O(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])])}}});export{Oe as default};
