var oe=Object.defineProperty;var R=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var P=(v,n,i)=>n in v?oe(v,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):v[n]=i,Y=(v,n)=>{for(var i in n||(n={}))ne.call(n,i)&&P(v,i,n[i]);if(R)for(var i of R(n))de.call(n,i)&&P(v,i,n[i]);return v};import{r as u,d as c,A as F,o as w,c as ie,e as U,f as e,w as l,B as y,j as V,v as ue,x as re,I as se,m as _,n as ce}from"./index.23926b0b.js";import{a as pe,b as me,c as fe,r as _e,u as ve,d as ge}from"./mongoData.6735cd0d.js";const be={id:"defaultId1",class:"u43f13"},he={id:"c39a19",class:"app-container"},we=_("\u67E5\u8BE2 "),ye=_("\u91CD\u7F6E "),Ve=_("\u65B0\u589E "),De=_("\u5220\u9664 "),Ue={id:"g3b150",class:"u597a7"},Ce=_("\u4E00\u952E\u5907\u4EFD\u6570\u636E\u5E93 "),Ne={id:"c5627b"},ke={id:"cb7c2e",class:"u8f6b2"},Se=_("\u7F16\u8F91 "),Te=_("\u5220\u9664 "),xe=_("\u786E\u5B9A "),ze=_("\u53D6\u6D88 "),Be={setup(v){const{proxy:n}=ce();async function i(){p.value.pageNum=1,N.value=!0;try{await g()}catch{console.log("\u67E5\u8BE2\u5931\u8D25")}N.value=!1}function I(){n.resetForm("queryRef"),i()}function Q(){C(),b.value=!0,T.value="\u6DFB\u52A0"}async function A(){await pe({name:"",pathDir:"",downNum:"",downUrl:""})&&(n.$message({message:"\u5907\u4EFD\u5B8C\u6210",type:"success"}),g())}async function E(t){k.value=t.map(a=>a._id),z.value=!t.length}async function g(){S.value=!0;let t=Y({},r.value);t.start=(p.value.pageNum-1)*p.value.pageSize,t.limit=p.value.pageSize,t.createTime&&t.createTime.length>0&&(t.startTime=t.createTime[0],t.endTime=t.createTime[1]);try{let a=await me(t);a&&($.value=a.data.list,p.value.total=a.data.total,S.value=!1)}catch{}}async function L(t){C(),b.value=!0,T.value="\u4FEE\u6539";const a=t._id||k.value,m=await fe({_id:a});d.value=m.data}async function x(t){const a=t._id||k.value;await n.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664"'+(t.dictName||"\u6240\u9009")+'"\u7684\u6570\u636E\u9879\uFF1F')&&await _e({_id:a})&&(g(),n.$modal.msgSuccess("\u5220\u9664\u6210\u529F"))}async function j(t){p.value.pageSize=t,g()}async function O(t){p.value.pageNum=t,g()}async function C(t){d.value._id="",n.resetForm("mongoDataRef")}function W(){n.$refs.mongoDataRef.validate(t=>{t&&(d.value._id?ve(d.value).then(a=>{n.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),b.value=!1,g()}):ge(d.value).then(a=>{n.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),b.value=!1,g()}))})}function G(){b.value=!1,C()}u(!0);const r=u({name:"",pathDir:"",downNum:0,createTime:[],downUrl:""}),N=u(!1),z=u(!0);var $=u([]),k=u([]);const S=u(!1),p=u({pageNum:1,pageSize:10,total:0}),b=u(!1),T=u("\u63D0\u793A"),H=u({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],pathDir:[{required:!0,message:"\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],downNum:[{required:!0,message:"\u4E0B\u8F7D\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],downUrl:[{required:!0,message:"\u4E0B\u8F7D\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=u({id:"",name:"",pathDir:"",downNum:0,downUrl:""}),J=u(!1);return g(),(t,a)=>{const m=c("el-input"),s=c("el-form-item"),M=c("el-input-number"),K=c("el-date-picker"),f=c("el-button"),q=c("el-form"),B=c("el-col"),X=c("el-row"),h=c("el-table-column"),Z=c("el-table"),ee=c("el-pagination"),ae=c("el-dialog"),D=F("hasPermi"),le=F("loading");return w(),ie("div",be,[U("div",he,[e(q,{id:"c0c580","label-width":"68px",model:r.value,inline:!0,ref:"queryRef"},{default:l(()=>[e(s,{id:"cffab5",label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(m,{id:"cc98f6",modelValue:r.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value.name=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"cd7194",label:"\u76EE\u5F55",prop:"pathDir"},{default:l(()=>[e(m,{id:"c5fe93",modelValue:r.value.pathDir,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value.pathDir=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"c6aa73",label:"\u4E0B\u8F7D\u5730\u5740",prop:"downUrl"},{default:l(()=>[e(m,{id:"c1bd57",modelValue:r.value.downUrl,"onUpdate:modelValue":a[2]||(a[2]=o=>r.value.downUrl=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"c6021e",label:"\u4E0B\u8F7D\u6B21\u6570",prop:"downNum"},{default:l(()=>[e(M,{id:"c37b62",modelValue:r.value.downNum,"onUpdate:modelValue":a[3]||(a[3]=o=>r.value.downNum=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"c5214a",label:"\u521B\u5EFA\u65E5\u671F",prop:"createTime"},{default:l(()=>[e(K,{id:"c3396c",modelValue:r.value.createTime,"onUpdate:modelValue":a[4]||(a[4]=o=>r.value.createTime=o),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"])]),_:1}),e(s,{id:"ceb63d"},{default:l(()=>[e(f,{id:"c6cc5d",loading:N.value,onClick:i,icon:"Search",type:"primary"},{default:l(()=>[we]),_:1},8,["loading"]),e(f,{id:"c407a1",onClick:I,icon:"Refresh"},{default:l(()=>[ye]),_:1})]),_:1})]),_:1},8,["model"]),e(X,{id:"c4e1b1",class:"ud5872"},{default:l(()=>[e(B,{id:"c0ff96",class:"u30542",span:1.5},{default:l(()=>[y((w(),V(f,{id:"cb501a",onClick:Q,type:"primary",plain:"",icon:"Plus"},{default:l(()=>[Ve]),_:1})),[[D,["add"]]])]),_:1},8,["span"]),e(B,{id:"c38721",class:"uee2e5",span:1.5},{default:l(()=>[y((w(),V(f,{id:"c44364",onClick:x,type:"danger",plain:"",icon:"Delete",disabled:z.value},{default:l(()=>[De]),_:1},8,["disabled"])),[[D,["delete"]]])]),_:1},8,["span"]),U("div",Ue,[e(f,{id:"g2ca87",onClick:a[5]||(a[5]=o=>A()),type:"primary"},{default:l(()=>[Ce]),_:1})])]),_:1}),y((w(),V(Z,{id:"c1f74d",data:re($),onSelectionChange:E},{default:l(()=>[e(h,{id:"c0e6c1",type:"selection",width:"55",align:"center"}),e(h,{id:"cf7b34",prop:"name",label:"\u540D\u79F0"}),e(h,{id:"c52a26",prop:"pathDir",label:"\u76EE\u5F55"}),e(h,{id:"c24741",prop:"createTime",label:"\u5907\u4EFD\u65F6\u95F4"},{default:l(o=>[U("span",Ne,ue(t.parseTime(o.row.createTime)),1)]),_:1}),e(h,{id:"c8fb0d",prop:"downUrl",label:"\u4E0B\u8F7D\u5730\u5740"}),e(h,{id:"c1dd18",label:"\u64CD\u4F5C",align:"center",width:"120px",fixed:"right"},{default:l(o=>[U("div",ke,[y((w(),V(f,{id:"c0158f",onClick:te=>L(o.row),type:"text",icon:"Edit"},{default:l(()=>[Se]),_:2},1032,["onClick"])),[[D,["edit"]]]),y((w(),V(f,{id:"ca1f0f",onClick:te=>x(o.row),class:"u6201e",type:"text",icon:"Delete"},{default:l(()=>[Te]),_:2},1032,["onClick"])),[[D,["delete"]]])])]),_:1})]),_:1},8,["data"])),[[le,S.value]]),y(e(ee,{id:"c4736b",class:"u2a50d",layout:"sizes, prev, pager, next",total:p.value.total,"current-page":p.value.pageNum,"page-size":p.value.pageSize,onCurrentChange:O,onSizeChange:j},null,8,["total","current-page","page-size"]),[[se,p.value.total>0]]),e(ae,{id:"c8f18b",modelValue:b.value,"onUpdate:modelValue":a[10]||(a[10]=o=>b.value=o),title:T.value,"append-to-body":""},{default:l(()=>[e(q,{id:"c433bf",ref:"mongoDataRef",model:d.value,rules:H.value,"label-width":"80px"},{default:l(()=>[e(s,{id:"c88bc0",label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(m,{id:"cc9518",modelValue:d.value.name,"onUpdate:modelValue":a[6]||(a[6]=o=>d.value.name=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"c53738",label:"\u4E0B\u8F7D\u5730\u5740",prop:"downUrl"},{default:l(()=>[e(m,{id:"ca090e",modelValue:d.value.downUrl,"onUpdate:modelValue":a[7]||(a[7]=o=>d.value.downUrl=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"cf77f6",label:"\u76EE\u5F55",prop:"pathDir"},{default:l(()=>[e(m,{id:"c767eb",modelValue:d.value.pathDir,"onUpdate:modelValue":a[8]||(a[8]=o=>d.value.pathDir=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"c500c0",label:"\u4E0B\u8F7D\u6B21\u6570",prop:"downNum"},{default:l(()=>[e(M,{id:"ce38e5",modelValue:d.value.downNum,"onUpdate:modelValue":a[9]||(a[9]=o=>d.value.downNum=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(s,{id:"c154de"},{default:l(()=>[e(f,{id:"c3c445",loading:J.value,onClick:W,type:"primary"},{default:l(()=>[xe]),_:1},8,["loading"]),e(f,{id:"cf301a",onClick:G,type:"default"},{default:l(()=>[ze]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])])}}};export{Be as default};
